# UltraPlonk zk-SNARK Verifier

The UltraPlonk zk-SNARK verifier is a Rust-based implementation of Noir's UltraPlonk Solidity verifier, optimized to be used contextually with [zkVerify](https://github.com/zkVerify/zkVerify).

## Usage

For full usage example, see [examples/rust_example.rs](./examples/main.rs).

```rust
use ultraplonk_no_std::verify;
use hex_literal::hex;

fn main() {
  let proof_data = hex!("15d2...79b3");

  let vk_data = hex!("0000...0000");

  let pubs = [ hex!("000000000000000000000000000000000000000000000000000000000000000a") ];

  verify::<()>(&vk_data, &proof_data, &pubs).unwrap();
}
```

# Noir-CLI

This repository also offers a tool, called `noir-cli`, to simplify the interaction with zkVerify starting from proof, vk, and public inputs artifacts generated via Noir tooling.

> **Note:** Recursive proofs are currently not supported.

## Requirements

Before starting, install `noir-cli`:

  ```bash
    cargo install --features bins --path .
  ```

## Generate an Ultraplonk proof with Noir toolchain

Please, follow the [official Noir documentation](https://noir-lang.org/docs/getting_started/quick_start) to generate a sample proof. At the end of the process you should have two binary files generated by `bb`, namely, the proof and vk.

## Convert `proof` and `vk` into zkVerify format
After you obtain the proof and vk from `bb` (let's call them `bb_proof`, and `bb_vk`, respectively), you should convert them using `noir-cli`.

Let's start from the proof (which also contains public inputs). Run the command:

```bash
noir-cli proof-data -n <num_public_inputs> --input-proof <bb_proof path> --output-proof <zkv_proof path> --output-pubs <zkv_pubs path>
```

This command will provide the `zkv_proof` and `zkv_pubs` files in binary format. Also the hexadecimal files `zkv_proof.hex`, and `zkv_pubs.hex`are generated, for ease of submission to `zkVerify`.

Then, we convert the vk by running the command:

```bash
noir-cli key --input <bb_vk path> --output <zkv_vk path>
```

Also in this case, you should get the `zkv_vk`, and `zkv_vk.hex` files.

To make sure that everything works correctly, run the `noir-cli verify` command by by providing the vk, proof, and pubs in binary format:

```bash
noir-cli verify --key <zkv_vk path> --proof <zkv_proof path> --pubs <zkv_pubs path>
```

---
# Zk-SNARK Conversion Tool UltraPlonk â†’ ZKVerify

## Problem

Currently, developers using the Noir/Nargo stack with the UltraPlonk backend face a critical limitation: **the lack of tools to convert zk-SNARK proofs generated via CLI (`bb`) into a format compatible with ZKVerify**. This prevents direct frontend integrations with modern verifiers.

Developers working with UltraPlonk face the following barriers:

- Proofs generated by `bb prove` are binary (`.bin`) and incompatible with ZKVerify.
- Conversion to hex format is only possible via CLI, preventing frontend/browser usage.
- There is no official solution for runtime conversion via JavaScript.

<img width="50%" alt="problem" src="https://github.com/user-attachments/assets/764ccb54-c7b9-43fa-97bd-17c6239da7d0" />

## Solution

This library provides an **open-source JavaScript/TypeScript library** that:

- Converts proofs and `Uint8Array` keys generated by `@aztec/bb.js` to `hex` in Node.js or browser environments.
- Generates the proof format accepted by ZKVerify from the UltraPlonk structure.
- Provides a user-friendly API for Web3 developers, DApps, and ZK tools.

> This library **is already functional as a PoC**, with successful proof submissions to ZKVerify.


<p align="center">  
  <img src="https://github.com/user-attachments/assets/a8bc6885-754d-483d-9b83-2d20505816d8" alt="solution" width="45%" />  
  <img src="https://github.com/user-attachments/assets/d20373c5-67b1-4002-8d11-f7a0519200db" alt="solution2" width="50%" />  
</p>

## Proof of Feasibility

The developed PoC already demonstrates that:

- Conversion can be done entirely in Node.js without CLI.
- The converted format is accepted by ZKVerify's API.
- It can run in Node.js backend.

[Zk Verify Proof Submitted](https://zkverify-testnet.subscan.io/extrinsic/0x29371536bbabbbe0dd17eed201ef966ff2dc7e8d2875938c65522016e0b3c344)

## How to use

For a backend usage example, see [examples/backend_example.js](./examples/backend_example.js).
